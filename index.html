<!DOCTYPE html>
<html>
<head>
  <title>All Products</title>
</head>
<body>
  <h2>Product Catalog</h2>
  <div id="products"></div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD2-n2E63mxeYwQBfyIDd-OmRMQzu3z9xw",
      authDomain: "all-hall-shop.firebaseapp.com",
      databaseURL: "https://all-hall-shop-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "all-hall-shop",
      storageBucket: "all-hall-shop.firebasestorage.app",
      messagingSenderId: "741136437274",
      appId: "1:741136437274:web:86931f347cd0127faf81a3",
      measurementId: "G-5148LZX8G3"
    };
    firebase.initializeApp(firebaseConfig);

    const productsRef = firebase.database().ref("products");

    productsRef.on("value", snapshot => {
      let container = document.getElementById("products");
      container.innerHTML = "";
      snapshot.forEach(child => {
        let p = child.val();
        container.innerHTML += `
          <div style="border:1px solid #ddd; padding:10px; margin:10px;">
            <img src="${p.image}" width="120"><br>
            <strong>${p.name}</strong><br>
            $${p.price}<br>
            <button onclick="viewProduct('${child.key}')">View</button>
          </div>
        `;
      });
    });

    function viewProduct(id) {
      window.location.href = "product.html?id=" + id;
    }
  </script>
</body>
</html>
